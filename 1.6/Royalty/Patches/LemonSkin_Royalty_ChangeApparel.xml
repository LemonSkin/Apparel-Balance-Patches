<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!-- Beret -->
  <Operation Class="PatchOperationSequence">
    <operations>
      <li Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[defName="Apparel_Beret"]/recipeMaker/researchPrerequisite</xpath>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="Apparel_Beret"]/recipeMaker</xpath>
        <value>
          <researchPrerequisites>
            <li>NobleApparel</li>
            <li>ComplexClothing</li>
          </researchPrerequisites>
        </value>
      </li>
    </operations>
  </Operation>
  <!-- Tier 2 Apparel: Formal shirt -->
  <Operation Class="PatchOperationSequence">
    <operations>
      <li Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name="ApparelShirtRoyalTier2Base"]/recipeMaker/researchPrerequisite</xpath>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name="ApparelShirtRoyalTier2Base"]/recipeMaker</xpath>
        <value>
          <researchPrerequisites>
            <li>NobleApparel</li>
            <li>ComplexClothing</li>
          </researchPrerequisites>
        </value>
      </li>
    </operations>
  </Operation>
  <!-- Tier 2 Hats: Ladies hat, Top hat -->
  <Operation Class="PatchOperationSequence">
    <operations>
      <li Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name="ApparelHatRoyalTier2"]/recipeMaker/researchPrerequisite</xpath>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name="ApparelHatRoyalTier2"]/recipeMaker</xpath>
        <value>
          <researchPrerequisites>
            <li>NobleApparel</li>
            <li>ComplexClothing</li>
          </researchPrerequisites>
        </value>
      </li>
    </operations>
  </Operation>
  <!-- Tier 5 Apparel: Corset, Formal vest -->
  <Operation Class="PatchOperationSequence">
    <operations>
      <li Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name="ApparelVestRoyalTier5Base"]/recipeMaker/researchPrerequisite</xpath>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name="ApparelVestRoyalTier5Base"]/recipeMaker</xpath>
        <value>
          <researchPrerequisites>
            <li>NobleApparel</li>
            <li>ComplexClothing</li>
          </researchPrerequisites>
        </value>
      </li>
    </operations>
  </Operation>
  <!-- Coronet -->
  <Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[defName="Apparel_Coronet"]/recipeMaker/researchPrerequisite</xpath>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>Defs/ThingDef[defName="Apparel_Coronet"]/recipeMaker/researchPrerequisite</xpath>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>Defs/ThingDef[defName="Apparel_Coronet"]/recipeMaker</xpath>
          <value>
            <researchPrerequisites>
              <li>RoyalApparel</li>
              <li>Smithing</li>
            </researchPrerequisites>
          </value>
        </li>
      </operations>
    </match>
  </Operation>
  <!-- Crown -->
  <Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[defName="Apparel_Crown"]/recipeMaker/researchPrerequisite</xpath>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>Defs/ThingDef[defName="Apparel_Crown"]/recipeMaker/researchPrerequisite</xpath>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>Defs/ThingDef[defName="Apparel_Crown"]/recipeMaker</xpath>
          <value>
            <researchPrerequisites>
              <li>RoyalApparel</li>
              <li>Smithing</li>
            </researchPrerequisites>
          </value>
        </li>
      </operations>
    </match>
  </Operation>
</Patch>
